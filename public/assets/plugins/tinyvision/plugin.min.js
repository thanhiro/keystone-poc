/*!
 * TinyVision v1.0.0
 *
 * A visual file selector for TinyMCE v4.
 *
 * https://github.com/MonkDev/tinyvision
 *
 * Copyright 2013 by Monk Development, Inc.
 * Licensed MIT
 */
!function(a,b,c){"use strict";c.PluginManager.add("tinyvision",function(a,c){var d={};d.win=null,d.WINDOW_HEIGHT=537,d.WINDOW_URL=c+"/tinyvision.html",d.WINDOW_WIDTH=702,d.skinUrl=function(){for(var a,c,d=/\/skins\/\w+\/skin(\.min)?\.css$/,e=b.styleSheets,f=e.length,g=0;f>g;g+=1)if(a=e[g].href,a&&a.match(d)){c=a;break}return c},d.iframeWindow=function(){return d.win.getEl().getElementsByTagName("iframe")[0].contentWindow},d.selected=function(){return d.iframeWindow().selected()},d.populateField=function(a){var b=d.selected();return a.value=b?b.value:"",d},d.openWindow=function(b,c,e,f){return d.win=a.windowManager.open({title:"Select "+e,url:d.WINDOW_URL,buttons:[{text:"Select",subtype:"primary",onclick:function(){d.populateField(f.document.getElementById(b)),d.win.close()}},{text:"Cancel",onclick:"close"}],width:d.WINDOW_WIDTH,height:d.WINDOW_HEIGHT},{fieldValue:c,options:a.settings.tinyvision,skinUrl:d.skinUrl(),type:e}),d},a.addCommand("tinyvision",function(a){d.openWindow(a.fieldId,a.fieldValue,a.type,a.win)}),a.settings.file_browser_callback=d.openWindow})}(window,document,tinymce);